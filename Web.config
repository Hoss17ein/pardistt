<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <section name="PecPGW.Samples.WebApp.WebForms.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup>
  </configSections>
  <appSettings>
    <add key="ckfinderAllowedRole" value="*" />
    <add key="LoginAccount" value="Y884H52iy5J34IeRY8jx" />
    <add key="ParsianPGWBillServiceUrl" value="https://pec.shaparak.ir/NewIPGServices/Bill/BillService.asmx" />
    <add key="ParsianPGWSaleServiceUrl" value="https://pec.shaparak.ir/NewIPGServices/Sale/SaleService.asmx" />
    <add key="ParsianPGWConfirmServiceUrl" value="https://pec.shaparak.ir/NewIPGServices/Confirm/ConfirmService.asmx" />
    <add key="ParsianIPGPageUrl" value="https://pec.shaparak.ir/NewIPG/?token={0}" />
    <add key="BillPaymentCallback" value="" />
    <add key="SalePaymentCallback" value="" />
    <add key="CompetitionDefaultFee" value="150000" />
    <add key="CompetitionSingleFee" value="150000" />
    <add key="CompetitionDoubleFee" value="300000" />
  </appSettings>
  <connectionStrings>
    <add name="KalaDataBaseConnectionString" connectionString="server=185.55.224.10 ;Database=ffffffffff ;"
      providerName="System.Data.SqlClient" />
    <add name="newwensdayConnectionString" connectionString="Data Source=DESKTOP-H2CKAJ3\SQLEXPRESS;Initial Catalog=newwensday;Integrated Security=True"
      providerName="System.Data.SqlClient" />
    <add name="my dataConnectionString" connectionString="Data Source=HOSSEIN\SQLEXPRESS;Initial Catalog=pardis;Integrated Security=True;Connection Timeout=120;"
      providerName="System.Data.SqlClient" />
  </connectionStrings>
  
  <log4net debug="true">
    <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
      <file value="C:\\Logs\\Parsian.Samples.WebApp.txt" />
      <appendToFile value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="10MB" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%-5p %d %5rms %-22.22c{1} %-18.18M - %m%n" />
      </layout>
    </appender>
    <logger name="GeneralLogger" additivity="false">
      <appender-ref ref="RollingLogFileAppender" />
    </logger>
  </log4net>
  <system.web>
    <customErrors mode="Off"></customErrors>
    <globalization requestEncoding="utf-8" responseEncoding="utf-8" culture="fa-IR" uiCulture="fa-IR" fileEncoding="utf-8" />

         <roleManager enabled="true" defaultProvider="SecurityTutorialsSqlRoleProvider">
       <providers>
         <add connectionStringName="my dataConnectionString" applicationName="SecurityTutorials" name="SecurityTutorialsSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" />
       </providers>
     </roleManager>
      <authentication mode="Forms">
        <forms loginUrl="/admin/Login.aspx" protection="All" timeout="60" path="/admin" slidingExpiration="true" />
      </authentication>
     <membership defaultProvider="SecurityTutorialsSqlMembershipProvider">
       <providers>
         <!-- Add a customized SqlMembershipProvider -->
         <add name="SecurityTutorialsSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="my dataConnectionString" enablePasswordRetrieval="True" enablePasswordReset="true" requiresQuestionAndAnswer="false" applicationName="SecurityTutorials" requiresUniqueEmail="false" passwordFormat="Clear" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="4" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" passwordStrengthRegularExpression="" />
       </providers>
     </membership>
    <anonymousIdentification enabled="true" />
         <profile enabled="true" defaultProvider="ProfileProvider">
       <providers>
         <add name="ProfileProvider" connectionStringName="my dataConnectionString" applicationName="/" type="System.Web.Profile.SqlProfileProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
       </providers>
                           <properties>
          <add name="Name" />
          <add name="Ostan" />
          <add name="Shahr" />
          <add name="Address" />
          <add name="PostalKod" />
          <add name="Tel" />
          <add name="Mobail" />
          <add name="Fax" />
          <add name="SherkatName" />
          <add name="EMail" />
          <add name="Emtiaz" />
          <add name="Nemayandeh" />
          <add name="ersal_by" />
          <add name="last_order_ID" />
          <add name="sex" />
          <add name="age" />
          <add name="job" />
          <add name="madrak" />
          <add name="maried" />
          <add name="FirstName" />
          <add name="LastName" />
          <add name="Phone" />
          <add name="Mobile" />
          <add name="BirthDate" />
          <add name="Gender" />
          <add name="Cart" serializeAs="Binary" type="WroxShoppingCart" allowAnonymous="true" />
        </properties>
    </profile>
    <compilation debug="true" targetFramework="4.5.1">
      <assemblies>
        <!--<add assembly="System.Web.Routing, Version=3.5.0.0,    Culture=neutral, PublicKeyToken=31BF3856AD364E35" />-->
        <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Abstractions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Data.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.ServiceModel.Web, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Data.Services.Client, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Data.Services.Design, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Data.Entity, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
        <add assembly="System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.ServiceModel.Activation, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Web.ApplicationServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
        <add assembly="System.Configuration, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
        <add assembly="System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Web.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
        <add assembly="System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Drawing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
        <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Data.Services.Client, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Data.Services.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
        <add assembly="System.Web.DynamicData, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.ComponentModel.DataAnnotations, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Runtime, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
        <add assembly="System.Collections, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
      </assemblies>
    </compilation>
    <httpRuntime targetFramework="4.5.1" executionTimeout="1200"  maxRequestLength="1048576" />
    <pages>
      <namespaces>
        <add namespace="System.Web.Optimization" />
      </namespaces>
      <controls>
        <add assembly="Microsoft.AspNet.Web.Optimization.WebForms" namespace="Microsoft.AspNet.Web.Optimization.WebForms" tagPrefix="webopt" />
      </controls>
    </pages>

  </system.web>
  <system.webServer>
    <directoryBrowse enabled="false" />
    <httpProtocol>
      <customHeaders>
        <add name="Content-Type" value="text/html; charset=utf-8" />
      </customHeaders>
    </httpProtocol>
    <rewrite>
      <rules>
        <rule name="LoginRedirect" stopProcessing="true">
          <match url="^login\.aspx$" />
          <action type="Redirect" url="/Account/Login.aspx" redirectType="Permanent" />
        </rule>
        
        <rule name="NewsDetailRedirect" stopProcessing="true">
          <match url="^news/([0-9]+)/(.*)$" />
          <action type="Rewrite" url="/NewsDetail.aspx?id={R:1}" />
        </rule>
        <rule name="AddTrailingSlash" stopProcessing="true">
          <match url="(.*[^/])$" />
          <conditions logicalGrouping="MatchAll">
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
            <!-- Do not add slash for requests that look like files (e.g., .aspx, .css, .js, .jpg, etc.) -->
            <add input="{REQUEST_URI}" pattern="\.[^/]+$" negate="true" />
          </conditions>
          <action type="Redirect" url="{R:1}/" redirectType="Permanent" />
        </rule>
        <rule name="LowercaseAllUrls" stopProcessing="true">
          <match url=".*[A-Z].*" ignoreCase="false" />
          <action type="Redirect" url="{ToLower:{R:0}}" />
        </rule>
        <rule name="RedirectWwwToNonWww" stopProcessing="false">
          <match url="(.*)" />
          <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
            <add input="{HTTP_HOST}" pattern="^(www\.)(.*)$" />
          </conditions>
          <action type="Redirect" url="http://{C:2}{REQUEST_URI}" redirectType="Permanent" />
        </rule>
        <!--<rule name="HTTP/S to HTTPS Redirect" enabled="true" stopProcessing="true">
          <match url="(.*)" />
          <conditions logicalGrouping="MatchAny">
            <add input="{SERVER_PORT_SECURE}" pattern="^0$" />
          </conditions>
          <action type="Redirect" url="https://{HTTP_HOST}{REQUEST_URI}" redirectType="Permanent" />
        </rule>-->
      </rules>
    </rewrite>
  </system.webServer>
  <!-- Enforce private admin authentication and dedicated admin login page -->
  <location path="admin">
    <system.web>
      <authorization>
        <deny users="?" />
      </authorization>
    </system.web>
  </location>
  <!-- Allow anonymous access to the dedicated admin login page -->
  <location path="admin/Login.aspx">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Newtonsoft.Json" culture="neutral" publicKeyToken="30ad4fe6b2a6aeed" />
        <bindingRedirect oldVersion="0.0.0.0-13.0.0.0" newVersion="13.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="WebGrease" culture="neutral" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-1.5.2.14234" newVersion="1.5.2.14234" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Buffers" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.3.0" newVersion="4.0.3.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <system.codedom>
    <compilers>
      <compiler language="c#;cs;csharp" extension=".cs"
                type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.CSharpCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                warningLevel="4" compilerOptions="/langversion:6 /optimize+" />
      <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb"
                type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.VBCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                warningLevel="4" compilerOptions="/optimize+" />
    </compilers>
  </system.codedom>
  <applicationSettings>
    <PecPGW.Samples.WebApp.WebForms.Properties.Settings>
      <setting name="PecPGW_Samples_WebApp_WebForms_ParsianPGWBillPaymentServices_BillService" serializeAs="String">
        <value>https://pec.shaparak.ir/NewIPGServices/bill/billservice.asmx</value>
      </setting>
      <setting name="PecPGW_Samples_WebApp_WebForms_ParsianPGWSalePaymentServices_SaleService" serializeAs="String">
        <value>https://pec.shaparak.ir/newipgservices/sale/saleservice.asmx</value>
      </setting>
      <setting name="PecPGW_Samples_WebApp_WebForms_ParsianPGWConfirmPaymentServices_ConfirmService" serializeAs="String">
        <value>https://pec.shaparak.ir/NewIPGServices/confirm/confirmservice.asmx</value>
      </setting>
      <setting name="LoginAccount" serializeAs="String">
        <value>Y884H52iy5J34IeRY8jx</value>
      </setting>
      <setting name="PecPGW_Samples_WebApp_WebForms_ParsianPGWReversalServices_ReversalService" serializeAs="String">
        <value>https://pec.shaparak.ir/NewIPGServices/reverse/reversalservice.asmx</value>
      </setting>
    </PecPGW.Samples.WebApp.WebForms.Properties.Settings>
  </applicationSettings>
</configuration>
